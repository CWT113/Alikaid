# 多线程

## 进程与线程

### 进程（Process）

进程是<span style="color: #42a5f5">操作系统中资源分配的基本单位</span>，每个进程都有自己独立的内存空间。

特征：

1. 独立性：进程之前是相互独立的，一个进程的奔溃不会影响其他进程；
2. 资源分配：每个进程拥有自己的资源（如内存）；
3. 上下文切换：操作系统在不同进程之前切换时，需要保存和恢复进程的上下文，这是开销较大的操作；



### 线程（Thread）

<span style="color: #42a5f5">线程是进程的一个执行单元，一个进程可以包含多个线程</span>。所有线程共享该进程的资源。

特征：

1. 共享资源：同一进程中的多个线程共享该进程的内存和资源，因此线程之间通信和数据共享更高效；
2. 并发执行：多个线程可以并发执行，充分利用多核CPU的优势，提高程序的执行效率；
3. 轻量级：线程的创建和销毁比进程更快，上下文切换的开销也比较小；



## 并行与并发

### 并行（parallel）

<span style="color: #42a5f5">并行是指同一时刻真正同时执行多个任务。</span>

并行处理通常需要多核CPU来实现，因为每个处理器可以独立的执行一个任务。

特征：

1. 真正同时：并行处理意味着任务在实际的物理时间上同时进行，不仅仅是看起来同时；
2. 任务分解：为了实现并行，任务通常需要被分解为可以同时执行的子任务，这些子任务可以独立运行；

<img src="./assets/并行.png" style="display: block; margin: 0 auto;" />

### 并发（concurrency）

<span style="color: #42a5f5">并发是指在同一时间段内处理多个任务的能力。</span>

并发并不一定意味着这些任务是同时执行的，而是指系统能够处理多个任务，使它们看起来是在同时执行。

特征：

1. 任务交替：并发系统可能会交替执行多个任务，即处理器在不同任务时间来回切换，使得看起来是在并行执行；
2. 任务相互影响：并发系统中，任务可能会互相干扰或共享资源，因此需要适当的同步机制来避免冲突或不一致性；

<img src="./assets/并发.png" style="display: block; margin: 0 auto;"/>



::: tip 总结

- 并发可以发生在单核处理器上，通过任务来回切换模拟同时执行多个任务；
- 并行要求多核或多处理器，在物理上实现多个任务的同时执行；

:::















