# Linux 命令

## Linux目录结构

Linux没有盘符的概念，只有一个**根目录 /** ，所有的文件都以它开头，路径之间的层级关系，使用 **/** 来表示。

<img src="./image/image 1.png" alt="image.png"  />



## Linux基础命令

在 Linux 中，命令有其通用的格式：

```Plain Text
command [-options] [parameter]
```

- command：命令本身

- -options：[可选，非必填]，命令的一些选项，可以通过选项控制命令的行为细节

- parameter：[可选，非必填]，命令的参数，多用于命令的指向目标等



### tar -- 解压文件

作用：解压文件

语法：**`tar -czvf test.tar.gz`**



### ls -- 罗列内容

作用：列出目录下的内容

语法：**`ls [-a -l -h] [linux路径]`**

参数：

- -a：展示所有文件，包括隐藏文件夹

- -l：以列表的形式展示内容

- -h：展示文件的大小，且带单位

示例：

```SQL
-- 列出工作目录(home)下的内容
ls

-- 列出工作目录(home)下的内容，包括隐藏文件夹
ls -a

-- 以列表的形式，列出工作目录(home)下的内容，并且内容大小带单位
ls -a -l -h
ls -alh
```



### cd -- 切换工作目录

作用：切换当前所在的工作目录

语法：**`cd [linux路径]`**

参数：

- cd 命令无需选项，只有参数，表示要切换到哪个目录下

- cd 命令直接执行，不写参数，表示回到用户的 home 目录

示例：

```SQL
-- 切换到 根目录
cd /

-- cd 不加参数，默认回到 home 目录
cd
```



### **pwd -- 查看工作目录**

作用：查看当前所在的工作目录

语法：**`pwd`**

参数：pwd 命令，无选项、无参数，直接输入 pwd 即可

示例：

```SQL
-- 切换到 根目录
cd /

-- 查看当前的工作目录
pwd       -- 输出 /home/root
```



### 特殊路径符

在了解“特殊路径符”之前，先来了解一下 **相对路径** 和 **绝对路径**。

- 相对路径：以 **根路径为起点**，路径描述以 / 开头。

- 绝对路径：以 当前目录为起点，路径描述无需以 / 开头。

```SQL
-- 绝对路径写法
cd /home/linux/Desktop

-- 相对路径写法
cd Desktop
```



#### 特殊路径符

- `.`：表示 **当前目录**，如 cd ./Desktop 表示切换到当前目录下的 Desktop 目录内，和 cd Desktop 效果一致；

- `..`：表示**上一级目录**，如 cd .. 表示切换到上一级目录，cd ../.. 表示切换到上二级目录；

- `~`：表示 home 目录，如 cd ~，表示切换到 home 目录，cd ~/Desktop表示切换到 /home/Desktop目录；



### mkdir -- 创建文件夹

作用：创建文件夹

语法：**`mkdir [-p] linux路径`**

参数：

- -p：可选，表示可以创建连续的多层级目录

示例：

```SQL
-- 在 根目录 下，创建 test 文件夹
  -- 1、使用相对路径
  mkdir /home/liunx/test1
  -- 2、使用绝对路径
  mkdir test2
  -- 3、使用 . 特殊路径符
  mkdir ./test3
  -- 4、使用 ~ 特殊路径符
  mkdir ~/test4
 
 -- 在 根目录 下，创建 test/good/666 文件夹
 mkdir -p test/good/666
```

注意：创建文件夹需要修改权限，请确保操作均在 home 目录内进行！



### touch -- 创建文件

作用：创建文件（注意：不是创建文件夹）

语法：**`touch linux路径`**

参数：表示要创建的文件路径，相对、绝对、特殊路径符均可。

示例：

```SQL
-- 在 根目录 下，创建 test.txt 文件
touch test.txt
```



### **cat -- 查看文件**

作用：查看文件内容，一次展示所有内容

语法：**`cat linux路径`**

示例：

```SQL
-- 查看创建的 test.txt 文件内容
cat test.txt
```



### **more -- 查看文件（翻页）**

作用：查看文件内容，支持翻页查看（空格：翻页、q键：退出查看）

语法：**`more linux路径`**

示例：

```SQL
-- 查看 /etc/services 中的文件内容
more /etc/services
```



### cp -- 复制文件

作用：复制文件/文件夹

语法：**`cp [-r] 路径1 路径2`**

参数：

- -r ：可选，复制文件夹时使用，表示 递归复制文件夹

- 路径1：表示被复制的文件或文件夹

- 路径2：表示要复制到的路径

示例：

```SQL
-- 在 根目录 下创建 text.txt 文件，并复制一份，命名为 test2.txt
cp test.txt test2.txt
-- 在 根目录 下创建 good 文件夹，并复制一份，命名为 good2
cp -r test test666
```



### **mv -- 移动文件**

作用：移动文件/文件夹

语法：**`mv 路径1 路径2`**

参数：

- 路径1：表示被移动的文件或文件夹

- 路径2：表示要移动到的路径，如目标不存在，则会进行“改名”，确保目标存在

示例：

```SQL
-- 在 根目录 下创建 text.txt 文件，移动到 Desktop 文件夹下
mv test.txt Desktop
-- 在 根目录 下创建 good 文件夹，移动到 Desktop 文件夹下
 mv good Desktop
-- 改名：在 根目录 下创建 text1.txt 文件，移动到 text2.txt 文件下
mv test1.txt test2.txt
```



### **rm -- 删除文件**

**注意：rm 命令非常非常危险！尤其是出于 root 管理员用户的时候！请谨慎使用！**

作用：删除文件/文件夹

语法：**`rm [-r -f] 文件1 文件2 ... 文件n`**

参数：

- -r：可选，删除文件夹时使用，表示 递归删除 文件夹

- -f：表示force，强制删除（不会弹出提示确认信息）。

    - 注意：普通用户删除内容不会弹出提示，只用 root 管理员才会！！

示例：

```SQL
-- 在 根目录 下创建 test.txt test1.txt good good1 good2等文件及文件夹
touch test.txt
touch test1.txt
mkdir good
mkdir good1
mkdir good2
-- 删除 test.txt
rm test.txt
-- 删除 good 文件夹
rm -r good
-- 批量删除 good1 good2
rm -r *good*
```



**rm 通配符 * ：**

作用：rm 命令支持通配符 * ，即匹配任意内容（包含空），用来做**模糊匹配**：

- `test*`：匹配任何以 test 开头的内容

- `*test`：匹配任何以 test 结尾的内容

- `*test*`：匹配任何包含 test 的内容

示例：

```SQL
-- 删除包含 test 的文件
rm -r *test*
```



### **which -- 查找命令**

> 我们在之前学习的 linux 命令，起始本质就是一个个的二进制可执行程序。和 windows 系统中的 .exe 文件，是一个意思。



作用：查看 linux 命令（程序）存放在哪里

语法：**`which 命令`**

示例：

```SQL
-- 查找 cd 命令
which cd
-- 查找 cp 命令
which cd
```



### **find -- 查找文件**

为了能够查找到更多的文件，请使用 `su - root` 切换到 root 用户。

作用：按名称搜索指定的文件

语法：**`find 起始路径 -name "要查找的文件名"`**

示例：

```SQL
-- 查找 根目录 下，名称为 test 的所有文件
find / -name "test"
```



find 命令，也支持 通配符* 的使用（具体内容前面介绍过）：

```SQL
-- 查找 根目录 下，名称以 test 开头的所有文件
find / -name "test*"
-- 查找 根目录 下，名称包含 test 的所有文件
find / -name "*test*"
```



作用：按文件大小查找文件

语法：**`find 起始路径 -size +|-n[单位]`**

参数：

- +、-：表示大于和小于

- n：表示文件大小，以数字形式展示

- 单位：k（小写）表示kb，M表示MB，G表示GB

示例：

```SQL
-- 查找小于 10kb 的文件
find / -size -10k
-- 查找大于 100MB 的文件
find / -size +100M
-- 查找大于 1GB 的文件
find / -size +1G
```



### **grep -- 过滤关键字**

作用：从文件中通过关键字**过滤文件行**

语法：**`grep [-n] 关键字 文件路径`**

参数：

- -n：可选，表示在结果中显示匹配到关键字的行号

- 关键字：必填，表示过滤的关键字，带有空格或其他特殊符号，建议 "" 包裹

- 文件路径：必填，表示要过滤内容的文件路径，可作为内容输入端口

示例：

```SQL
-- 从 test.txt 中过滤 liuxu 关键字
grep "liuxu" test.txt
-- 从 test.txt 中过滤 liuxu 关键字，并显示行号
grep -n "liuxu" test.txt
```



### **wc -- 统计**

作用：统计文件的行数、单词数、字符数、字节数

语法：**`wc [-c -m -l -w] 文件路径`**

参数：

- -c：统计 bytes 数量

- -m：统计字符数量

- -l：统计行数

- -w：统计单词数量

示例：

```SQL
-- 统计 test.txt 文件的行数、单词数、字符数、字节数
wc test.txt

wc test.txt / wc -w test.txt / wc -c test.txt / wc -m test.txt
```



### **管道符**

符号：|

作用：将管道符左边的结果，作为右边命令的输入。

语法：

```SQL
cat test.txt | grep "liuxu"
-- 表示：读取 test.txt 的内容，从读取内容中过滤 liuxu 这个关键字
```

示例：

```SQL
-- 使用 grep 从 test.txt 中过滤 liuxu
grep "liuxu" test.txt
-- 使用 管道符 从 test.txt 中过滤 liuxu
cat test.txt | grep "liuxu"
-- 使用 管道符 从 test.txt 中获取内容行数
cat test.txt | wc -l
-- 使用 管道符 从 根目录 下，过滤 test 文件
ls ~ | grep test.txt 
-- 使用 管道符 从 /usr/bin 下，过滤 gtf 文件，并以列表形式查看详细信息
ls -l /usr/bin | grep gtf
-- 使用 管道符 从 test.txt 中过滤 liuxu，再过滤 beautiful
cat test.txt | grep "liuxu" | grep "beautiful"
```



### echo -- 输出内容

作用：在命令行内输出指定内容

语法：**`echo 输出的内容`**

参数：要输出的内容，使用 "" 包裹

示例：

```SQL
-- 在命令行输出 hello linux
echo "hello linux"
```



### 反引号 `

作用：反引号 ```` 可以在命令行输出 命令的执行结果，而不是把命令当作字符输出

示例：

```SQL
-- 在命令行输出 pwd 命令执行后的结果
echo `pwd`

echo pwd -- ❌ 把 pwd 当作字符串输出了
```



### 重定向符

作用：

- >：将左侧命令的结果，**覆盖**写入到符号右侧指定的文件中

- >>：将左侧命令的结果，**追加**写入到符号右侧指定的文件中

示例：

```SQL
-- 向 test.txt 文件中 覆盖 写入 hello linux
echo "hello linux" > test.txt
-- 向 test.txt 文件中 追加 写入根目录下所有文件夹的名称
ls >> test.txt 
```



### tail -- 查看尾部内容

作用：查看文件尾部内容，跟踪文件的最新更改

语法：**`tail [-f -num] linux路径`**

参数：

- -f：持续跟踪

- -num：查看尾部多少行，不填默认 10 行

- linux路径：被跟踪的文件路径

示例：

```SQL
-- 将根目录下所有文件夹的名称，覆盖写入到 test.txt 中，并读取后10条
ls >> test.txt 
-- 读取 test.txt 文件中，后 5条
tail -5 test.txt
-- 持续追踪 test.txt 文件，并向其添加 hello linux，并实时追踪
tail -f test.txt
```



## vim

vim（vi的加强版） 是 linux 中最经典的文本编辑器，同图形化界面中的文本编辑器一样，在 linux 中，vim 是在命令行对文本进行编辑的最佳选择。



### vim编辑器的工作模式

- **命令模式**：

    - 命令模式下，所敲的按键编辑器都来理解为命令，以命令驱动执行不同的功能。

    - 此模式下，不能自由进行文本编辑。

- **输入模式**：

    - 所谓的编辑模式、插入模式。

    - 此模式下，可以对文件内容进行自由编辑。

- **底线命令模式**：

    - 以 `:` 开始，通常用于文件的保存、退出。





![image.png](./image/image%202.png)



- 通过 vim 命令编辑文件，会打开一个新的窗口，这个窗口就是：命令模式窗口；

- 命令模式 是 vim 编辑器的入口和出口，如左图：

    - 进入 vim 编辑器会进入命令模式

    - 通过命令模式输入键盘指令，可以进入输入模式

    - 输入模式需要退回到命令模式，然后通过命令可以进入底线命令模式



### 基本使用

语法：**`vim 文件路径`**

注意：

- 如果文件路径表示的文件 不存在，那么命令会用于 创建新文件并编辑；

- 如果文件路径表示的文件 存在，那么命令会用于 编辑已有文件；



### 命令模式快捷键

|命令|描述|
|-|-|
|i|在当前光标位置进入 输入模式|
|a|在当前光标位置 之后 进入 输入模式|
|I|在当前行的开头，进入 输入模式|
|A|在当前行的结尾，进入 输入模式|
|o|在当前光标的下一行进入 输入模式|
|O|在当前光标的上一行进入 输入模式|
|esc|任何情况下输入 esc 都可回到命令模式|

|命令|描述|命令|描述|
|-|-|-|-|
|键盘上、键盘 k|向上移动光标|dd|删除光标所在行|
|键盘下、键盘 j|向下移动光标|ndd|n是数字，表示删除当前光标向下n行|
|键盘左、键盘 h|向左移动光标|yy|复制当前行|
|键盘右、键盘 l|向右移动光标|nyy|n是数字，表示复制当前光标向下n行|
|0|移动光标到当前行的开头|p|粘贴复制的内容|
|$|移动光标到当前行的结尾|u|撤销修改|
|PgUp|向上翻页|ctrl + r|反向撤销修改|
|PgDn|向下翻页|gg|跳到首行|
|/|进入搜索模式|G|跳到行尾|
|n|向下继续搜索|dG|从当前行开始，向下全部删除|
|m|向上继续搜索|dgg|从当前行开始，向上全部删除|
|||d$|从当前光标开始，删除到本行的结尾|
|||d0|从当前光标开始，删除到本行的开头|



### 底线命令模式

|命令|描述|
|-|-|
|:wq|保存并退出|
|:q|仅退出|
|:q!|强制退出|
|:w|仅保存|
|:set nu|显示行号|
|:set paste|设置粘贴模式|



### 用户和权限

root用户：即超级管理员，它拥有最大的系统操作权限。

普通用户：在自己的 home 目录内有权限，在其他许多地方的权限是受限制的。



#### su、exit 命令

**su：**

作用：用于账户切换

语法：**`su - 用户名`**

参数：

- -：是否在切换用户后加载环境变量，建议带上

- 用户名：要切换的用户

```SQL
-- 普通用户 切换到 root 用户
su - root

-- root 用户 切换到 普通用户
su - linux
```



**exit：**

作用：退回到上一个用户

语法：**`exit`**或**`ctrl+d`**

小贴士：普通用户切换其他用户，需要密码；root用户切换其他用户，无需密码。



#### sudo 命令

> 我们虽然可以使用 su 命令切换到 root 得到最大的权限，但是不建议使用 root 用户去操作命令，以免误操作带来系统损坏。

在使用 sudo 命令之前，我们需要进行配置：

- 切换到 root 用户，执行 **visudo 命令**，vim 会自动打开 /etc/soduers 文件，在文件最后添加一句话：

```SQL
-- 用户名 ALL=(ALL)    NOPASSWD: ALL
liunx ALL=(ALL)    NOPASSWD: ALL
```

- 保存退出后，切换回普通用户就可以使用了。



作用：为普通的命令授权，临时以 root 身份执行

语法：**`sudo 命令`**

示例：

```SQL
-- 使用普通用户在根目录下，创建 good 文件夹
sudo mkdir good

-- 删除 good 文件夹
sudo rm -r good
```



#### 用户和用户组

用户组管理（root权限）：

- 创建用户组：**`groupadd 用户组名`**

- 删除用户组：**`groupdel 用户组名`**

```SQL
-- 创建一个 itcast 用户组
 groupadd itcast
 
 -- 删除itcast 用户组
 groupdel itcast
```



用户管理（root权限）：

- 创建用户：**`useradd [-g -d] 用户名`**

    - -g：指定用户的组，不指定-g，会创建同名组并自动加入，指定-g需要组已经存在

    - -d：指定用户 home 目录，不指定，home目录默认在：/home/用户名

- 删除用户：**`userdel [-r] 用户名`**

    - -r：删除用户的 home 目录，不使用 -r，删除用户时，home 目录保留

- 查看用户所属组：**`id [用户名]`**

    - 用户名：被查看的用户，不提供则查看自身

- 修改用户所属组：**`usermod -aG 用户组 用户名`**

- 查看当前系统中的所有用户：**`getent passwd`**

- 查看当前系统中的所有组：**`getent group`**

```SQL
-- 创建 hello 用户
useradd hello
-- 删除 hello 用户，并删除 home 目录
userdel -r hello
-- 创建 hello 用户，指定组名为 linux，并查看当前用户所属组
useradd hello -g liunx
-- 查看创建得 hello 用户所在的组信息
id hello
-- 创建 hello1 用户，修改用户所属组，组名为 linux
usermod -aG liunx hello1
-- 查看当前系统中的所有用户
getent passwd
-- 查看当前系统中的所有组
getent group
```



#### 认知权限信息





![image.png](./image/image%203.png)



- 序号1：表示文件、文件夹的权限控制信息

- 序号2：表示文件、文件夹的所属用户

- 序号3：表示文件、文件夹的所属用户组



**序号1：**

权限细节总共分为10个槽位：

![image.png](./image/image%204.png)

举例：drwxr-xr-x

表示：

- 字母 d ：表示是一个文件夹

- rwx：表示用户具有 r（读）、w（写）、x（执行）的权限

- r-x：表示用户组具有r（读）、w（写）、x（执行）的权限

- r-x：表示其他用户具有r（读）、w（写）、x（执行）的权限



针对文件、文件夹的不同，rwx的含义有细微差别：

- r：

    - 文件：查看文件内容

    - 文件夹：查看文件夹内容，如同 ls 命令

- w：

    - 文件：可修改此文件

    - 文件夹：可在文件夹内 创建、删除、改名等操作

- x：

    - 文件：此文件可作为程序执行

    - 文件夹：可更改工作目录到此文件夹，如同 cd 命令



#### 修改权限信息

注意：只有文件、文件夹的所属用户或 root 用户可以修改。



**chmod：**

作用：修改文件、文件夹的权限信息

语法：**`chmod [-R] 权限 文件或文件夹`**

参数：

- -R：对文件夹内的全部内容应用同样的权限

示例：

```SQL
-- 新建 hello.txt 文件，修改权限为 rwxr-x--x
chmod u=rwx,g=rx,o=x hello.txt

-- 其中：
-- u：user，表示用户的权限
-- g：group，表示用户组的权限
-- o：other，表示其他用户的权限
```



**权限的数组序号：**

权限可以用3位数字来代表，第一位数组表示用户权限，第二位表示用户组权限，第三位表示其他用户权限。

数组的细节如下：**r：4  w：2  x：1**

- 0：无任何权限，即 ---

- 1：仅有x权限，即 --x

- 2：仅有w权限，即 -w-

- 3：仅有w和x权限，即 -wx

- 4：仅有r权限，即 r--

- 5：仅有r和x权限，即 r-x

- 6：仅有r和w权限，即 rw-

- 7：有全部权限，即 rwx

示例：`751`：表示用户：全部权限，用户组：有r和x权限，其他用户：仅有x权限

```SQL
-- 新建 hello.txt 文件，修改权限为 rwxr-x--x，使用数字权限序号
chmod 751 test.txt
```



#### 修改用户和用户组

注意：普通用户无法修改所属的用户和用户组，因此需使用 root 权限修改！



**chown：**

作用：修改用户和用户组

语法：**`chown [-R] [用户] : [用户组] 文件或文件夹`**

参数：

- -R：对文件夹内全部内容应用相同的用户或用户组

- 用户：修改所属用户

- 用户组：修改所属用户组

- `：`：用于分隔用户和用户组

示例：

```SQL
-- 将 hello.txt 所属用户修改为 liunx
chown liunx hello.txt
-- 将 hello.txt 所属用户组修改为 liunx
chown :liunx hello.txt
-- 将 hello.txt 所属用户和所属用户组都修改为 root
chown liunx:liunx hello.txt 
-- 将 good 文件夹下的所有文件，所属用户和所属用户组都修改为 root
chown -R liunx:liunx good
```

